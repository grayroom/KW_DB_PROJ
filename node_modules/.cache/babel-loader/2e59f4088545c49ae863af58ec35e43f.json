{"ast":null,"code":"import Document from '@tiptap/extension-document';\nimport Paragraph from '@tiptap/extension-paragraph';\nimport Text from '@tiptap/extension-text';\nimport Placeholder from '@tiptap/extension-placeholder';\nimport { Editor, EditorContent } from '@tiptap/vue-2';\nimport HardBreak from '@tiptap/extension-hard-break';\nimport HorizontalRule from '@tiptap/extension-horizontal-rule';\nimport { v4 as uuidv4 } from 'uuid';\nimport axios from 'axios';\nimport Cookies from 'js-cookie';\naxios.defaults.headers.post['Content-Type'] = 'application/json;charset=utf-8';\naxios.defaults.headers.post['Access-Control-Allow-Origin'] = '*';\nimport { radioSelect as RadioSelect, dropdownSelect as DropdownSelect, editable as Editable } from './Extension.js';\nexport default {\n  components: {\n    EditorContent\n  },\n\n  data() {\n    return {\n      editor: null,\n      title: ''\n    };\n  },\n\n  mounted() {\n    this.editor = new Editor({\n      extensions: [Document, Paragraph, Text, RadioSelect, DropdownSelect, Editable, Placeholder.configure({\n        placeholder: '양식을 작성해주세요'\n      }), HardBreak, HorizontalRule]\n    });\n  },\n\n  methods: {\n    insertRadio() {\n      this.editor.commands.insertContent('<radio-select count = \"0\" na = ' + uuidv4() + // random and for unique name(radio button group)\n      '></radio-select><editable><p>항목명을 명시하세요</p></editable>');\n      this.editor.chain().focus().setHorizontalRule().run(); // this.editor.commands.setHardBreak()\n    },\n\n    insertDropdown() {\n      this.editor.commands.insertContent('<dropdown-select></dropdown-select><editable><p>항목명을 명시하세요</p></editable>');\n      this.editor.chain().focus().setHorizontalRule().run(); // this.editor.commands.setHardBreak()\n    },\n\n    insertHr() {\n      this.editor.chain().focus().setHorizontalRule().run();\n    },\n\n    // put editor data with axios\n    putData() {\n      const accessToken = Cookies.get('access');\n      const data = {\n        \"content\": this.editor.getJSON(),\n        \"title\": this.title\n      };\n      axios.post('/emr/api/templates/', data, {\n        withCredentials: true,\n        crossDomain: true,\n        credentials: \"access\",\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: \"Bearer \" + accessToken\n        }\n      }).then(response => {\n        console.log(response); // location.reload()\n      }).catch(error => {\n        console.log(error); // location.reload()\n      });\n      this.toggleModal();\n    },\n\n    toggleModal() {\n      this.$refs.defaultModal.toggleAttribute('aria-hidden');\n      this.$refs.defaultModal.classList.toggle('hidden');\n      this.title = '';\n    }\n\n  },\n\n  beforeUnmount() {\n    this.editor.destroy();\n  }\n\n};","map":{"version":3,"mappings":"AAiHA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEAA;AACAA;AAGA,SACAC,0BADA,EAEAC,gCAFA,EAGAC,oBAHA,QAIA,gBAJA;AAMA;EACAC;IACAC;EADA,CADA;;EAKAC;IACA;MACAC,YADA;MAEAC;IAFA;EAIA,CAVA;;EAYAC;IACA;MACAC,aACAC,QADA,EAEAC,SAFA,EAGAC,IAHA,EAIAC,WAJA,EAKAC,cALA,EAMAC,QANA,EAOAC;QACAC;MADA,EAPA,EAUAC,SAVA,EAWAC,cAXA;IADA;EAeA,CA5BA;;EA8BAC;IACAC;MACA,mCACA,oCACAC,QADA,GACA;MACA,wDAHA;MAIA,sDALA,CAMA;IACA,CARA;;IASAC;MACA,mCACA,2EADA;MAEA,sDAHA,CAIA;IACA,CAdA;;IAeAC;MACA;IACA,CAjBA;;IAmBA;IACAC;MACA;MACA;QACA,gCADA;QAEA;MAFA;MAKA1B,kCACAM,IADA,EAEA;QACAqB,qBADA;QAEAC,iBAFA;QAGAC,qBAHA;QAIAC;UACA,kCADA;UAEAC;QAFA;MAJA,CAFA,EAWAC,IAXA,CAWAC;QACAC,sBADA,CAEA;MACA,CAdA,EAeAC,KAfA,CAeAC;QACAF,mBADA,CAEA;MACA,CAlBA;MAoBA;IACA,CAhDA;;IAkDAG;MACA;MACA;MAEA;IACA;;EAvDA,CA9BA;;EAwFAC;IACA;EACA;;AA1FA","names":["axios","radioSelect","dropdownSelect","editable","components","EditorContent","data","editor","title","mounted","extensions","Document","Paragraph","Text","RadioSelect","DropdownSelect","Editable","Placeholder","placeholder","HardBreak","HorizontalRule","methods","insertRadio","uuidv4","insertDropdown","insertHr","putData","withCredentials","crossDomain","credentials","headers","Authorization","then","response","console","catch","error","toggleModal","beforeUnmount"],"sourceRoot":"src/components","sources":["EmrEditor.vue"],"sourcesContent":["<template>\n\t<div class=\"editor\">\n\t\t<div class=\"editor__buttons--navbar mb-2 flex flex-wrap gap-1\">\n\t\t\t<button\n\t\t\t\tclass=\"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-300 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600\"\n\t\t\t\t@click=\"insertRadio\">\n\t\t\t\tpos / neg\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\tclass=\"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-300 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600\"\n\t\t\t\t@click=\"insertDropdown\">\n\t\t\t\tlist\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\tclass=\"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-300 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600\"\n\t\t\t\t@click=\"insertHr\">\n\t\t\t\tdivider\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\tclass=\"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-300 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600\">\n\t\t\t\tdummy\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\tclass=\"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-300 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600\">\n\t\t\t\tdummy\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\tclass=\"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-300 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600\">\n\t\t\t\tdummy\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\tclass=\"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-300 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600\">\n\t\t\t\tdummy\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\tclass=\"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-300 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600\">\n\t\t\t\tdummy\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\tclass=\"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-300 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600\">\n\t\t\t\tdummy\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\tclass=\"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-300 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600\">\n\t\t\t\tdummy\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\tclass=\"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-300 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600\">\n\t\t\t\tdummy\n\t\t\t</button>\n\t\t</div>\n\n\t\t<editor-content :editor=\"editor\" class=\"\" />\n\n\t\t<div class=\"editor__buttons--footer mt-2 flex gap-1\">\n\t\t\t<button outlined\n\t\t\t\tclass=\"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800\"\n\t\t\t\t@click=\"toggleModal\">\n\t\t\t\tsave form\n\t\t\t</button>\n\t\t</div>\n\n\t\t<!-- Modal container -->\n\t\t<div id=\"defaultModal\" tabindex=\" -1\" aria-hidden=\"true\" ref=\"defaultModal\"\n\t\t\tclass=\"hidden overflow-y-auto overflow-x-hidden fixed z-50 w-full md:inset-0 h-modal md:h-full\">\n\t\t\t<div class=\"relative p-4 w-full max-w-2xl h-full md:h-auto m-auto\">\n\t\t\t\t<!-- Modal content -->\n\t\t\t\t<div class=\"relative bg-white rounded-lg shadow dark:bg-gray-700\">\n\t\t\t\t\t<!-- Modal header -->\n\t\t\t\t\t<div class=\"flex justify-between items-start p-4 rounded-t border-b dark:border-gray-600\">\n\t\t\t\t\t\t<h3 class=\"text-xl font-semibold text-gray-900 select-none dark:text-white\">\n\t\t\t\t\t\t\tTemplate Editor\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t<button @click=\"toggleModal\"\n\t\t\t\t\t\t\tclass=\"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white\">\n\t\t\t\t\t\t\t<svg aria-hidden=\"true\" class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\"\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path fill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\td=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\"\n\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"></path>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t<span class=\"sr-only\">close</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!-- Modal body -->\n\t\t\t\t\t<div class=\"p-6 space-y-6\">\n\t\t\t\t\t\t<div class=\"mb-6\">\n\t\t\t\t\t\t\t<label for=\"tmeplate-title\"\n\t\t\t\t\t\t\t\tclass=\"block mb-2 text-sm font-medium text-gray-900 select-none dark:text-gray-300\">\n\t\t\t\t\t\t\t\tTemplate name\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<input type=\"text\" id=\"tmeplate-title\" v-model=\"title\"\n\t\t\t\t\t\t\t\tclass=\"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500\"\n\t\t\t\t\t\t\t\tplaceholder=\"양식 이름을 정해주세요\" required>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!-- Modal footer -->\n\t\t\t\t\t<div class=\"flex items-center p-6 space-x-2 rounded-b border-t border-gray-300 dark:border-gray-600\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800\"\n\t\t\t\t\t\t\t@click=\"putData\">\n\t\t\t\t\t\t\t승인</button>\n\t\t\t\t\t\t<button @click=\"toggleModal\" outlined\n\t\t\t\t\t\t\tclass=\"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-300 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600\">\n\t\t\t\t\t\t\t취소</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport Document from '@tiptap/extension-document'\nimport Paragraph from '@tiptap/extension-paragraph'\nimport Text from '@tiptap/extension-text'\nimport Placeholder from '@tiptap/extension-placeholder'\nimport { Editor, EditorContent } from '@tiptap/vue-2'\nimport HardBreak from '@tiptap/extension-hard-break'\nimport HorizontalRule from '@tiptap/extension-horizontal-rule'\n\nimport { v4 as uuidv4 } from 'uuid'\nimport axios from 'axios'\nimport Cookies from 'js-cookie'\n\naxios.defaults.headers.post['Content-Type'] = 'application/json;charset=utf-8';\naxios.defaults.headers.post['Access-Control-Allow-Origin'] = '*';\n\n\nimport {\n\tradioSelect as RadioSelect,\n\tdropdownSelect as DropdownSelect,\n\teditable as Editable\n} from './Extension.js'\n\nexport default {\n\tcomponents: {\n\t\tEditorContent,\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\teditor: null,\n\t\t\ttitle: ''\n\t\t}\n\t},\n\n\tmounted() {\n\t\tthis.editor = new Editor({\n\t\t\textensions: [\n\t\t\t\tDocument,\n\t\t\t\tParagraph,\n\t\t\t\tText,\n\t\t\t\tRadioSelect,\n\t\t\t\tDropdownSelect,\n\t\t\t\tEditable,\n\t\t\t\tPlaceholder.configure({\n\t\t\t\t\tplaceholder: '양식을 작성해주세요',\n\t\t\t\t}),\n\t\t\t\tHardBreak,\n\t\t\t\tHorizontalRule,\n\t\t\t]\n\t\t})\n\t},\n\n\tmethods: {\n\t\tinsertRadio() {\n\t\t\tthis.editor.commands.insertContent(\n\t\t\t\t'<radio-select count = \"0\" na = ' +\n\t\t\t\tuuidv4() + // random and for unique name(radio button group)\n\t\t\t\t'></radio-select><editable><p>항목명을 명시하세요</p></editable>')\n\t\t\tthis.editor.chain().focus().setHorizontalRule().run()\n\t\t\t// this.editor.commands.setHardBreak()\n\t\t},\n\t\tinsertDropdown() {\n\t\t\tthis.editor.commands.insertContent(\n\t\t\t\t'<dropdown-select></dropdown-select><editable><p>항목명을 명시하세요</p></editable>')\n\t\t\tthis.editor.chain().focus().setHorizontalRule().run()\n\t\t\t// this.editor.commands.setHardBreak()\n\t\t},\n\t\tinsertHr() {\n\t\t\tthis.editor.chain().focus().setHorizontalRule().run()\n\t\t},\n\n\t\t// put editor data with axios\n\t\tputData() {\n\t\t\tconst accessToken = Cookies.get('access');\n\t\t\tconst data = {\n\t\t\t\t\"content\": this.editor.getJSON(),\n\t\t\t\t\"title\": this.title\n\t\t\t}\n\n\t\t\taxios.post('/emr/api/templates/',\n\t\t\t\tdata,\n\t\t\t\t{\n\t\t\t\t\twithCredentials: true,\n\t\t\t\t\tcrossDomain: true,\n\t\t\t\t\tcredentials: \"access\",\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\tAuthorization: \"Bearer \" + accessToken\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then(response => {\n\t\t\t\t\tconsole.log(response)\n\t\t\t\t\t// location.reload()\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\tconsole.log(error)\n\t\t\t\t\t// location.reload()\n\t\t\t\t})\n\n\t\t\tthis.toggleModal()\n\t\t},\n\n\t\ttoggleModal() {\n\t\t\tthis.$refs.defaultModal.toggleAttribute('aria-hidden')\n\t\t\tthis.$refs.defaultModal.classList.toggle('hidden')\n\n\t\t\tthis.title = ''\n\t\t}\n\t},\n\n\tbeforeUnmount() {\n\t\tthis.editor.destroy()\n\t},\n}\n</script>\n\n<style lang=\"scss\">\nbutton {\n\tline-break: nowrap;\n}\n\n/* Basic editor styles */\n.ProseMirror {\n\tpadding: 1rem;\n\tborder: 1px solid rgb(209 213 219);\n\tborder-radius: 0.5rem;\n\theight: 100%;\n\n\t>hr {\n\t\tmargin-top: 1rem;\n\t\tmargin-bottom: 1rem;\n\t}\n}\n\n@media (prefers-color-scheme: dark) {\n\t.ProseMirror {\n\t\tborder-color: rgb(107 114 128);\n\t}\n}\n\n/* Basic editor styles */\n\n/* Placeholder (at the top) */\n.ProseMirror p.is-editor-empty:first-child::before {\n\tcontent: attr(data-placeholder);\n\tfloat: left;\n\tcolor: #6B7280;\n\tpointer-events: none;\n\theight: 0;\n}\n\nhr.ProseMirror-selectednode {\n\tborder-top: 1px solid #68CEF8;\n}\n\n#defaultModal {\n\tbackground: rgba($color: #000000, $alpha: 0.5);\n}\n</style>"]},"metadata":{},"sourceType":"module"}